I"ÿ/<p>Let the first one cast the stone who didnâ€™t use the print statement to debug and forgot to remove it after! What if I tell you that you can build your â€˜printsâ€™ system while developing? Setting logging in Django is quite simple. Iâ€™ve summed up Django <a href="https://docs.djangoproject.com/en/3.2/topics/logging/">docs</a> about logging in form of a quick snippet. There are a few logging ideas that help me a lot. Hope you find it useful.</p>

<!--more-->

<h3 id="quick-setup">Quick setup</h3>

<p>Go to your <code class="language-plaintext highlighter-rouge">settings.py</code> and prepare the <code class="language-plaintext highlighter-rouge">LOGGING</code> dict. This is the basic configuration that you will probably see in your console.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LOGGING</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"version"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">"disable_existing_loggers"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"handlers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"console"</span><span class="p">:</span> <span class="p">{</span><span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.StreamHandler"</span><span class="p">},</span>
    <span class="p">},</span>
    <span class="s">"loggers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"django"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"handlers"</span><span class="p">:</span> <span class="p">[</span><span class="s">"console"</span><span class="p">],</span>
            <span class="s">"level"</span><span class="p">:</span> <span class="s">"INFO"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>To add some logs in your console.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">'django'</span><span class="p">)</span>

<span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">'here goes your message'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="loggers">Loggers</h3>

<p>This is our log entry point. It consists of a logger handler, with some configuration, etc. Get instance of it with â€˜logging.getLogger(name)â€™ method.
To add a log you need to choose one of the following log levels.</p>

<ul>
  <li>DEBUG</li>
  <li>INFO</li>
  <li>WARNING</li>
  <li>ERROR</li>
  <li>CRITICAL</li>
</ul>

<p>All those levels are represented as a method of your logger instance. For example â€˜logger.critical(â€˜messageâ€™)â€™ will add log with level CRITICAL.</p>

<h3 id="handlers">Handlers</h3>

<p>So handlers are the next step in the logging process. When we define a logger in settings.py, we attach a list of handlers to it. Handlers are basically some kind of mechanizes to handle our logs. In the above exercise, I defined a console handler to write logs into the console. You can define multiple handlers for loggers. With the below configuration, Django logs will be saved to file too.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LOGGING</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"version"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">"disable_existing_loggers"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"handlers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"console"</span><span class="p">:</span> <span class="p">{</span><span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.StreamHandler"</span><span class="p">},</span>
        <span class="s">"file"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"level"</span><span class="p">:</span> <span class="s">"INFO"</span><span class="p">,</span>
            <span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.FileHandler"</span><span class="p">,</span>
            <span class="s">"filename"</span><span class="p">:</span> <span class="s">"logs/platform.log"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s">"loggers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"django"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"handlers"</span><span class="p">:</span> <span class="p">[</span><span class="s">"console"</span><span class="p">,</span> <span class="s">"file"</span><span class="p">],</span>
            <span class="s">"level"</span><span class="p">:</span> <span class="s">"INFO"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="formatters">Formatters</h3>

<p>This part is used only to format logging messages. Since those logs base on a python built-in logging module, you can use its <a href="https://docs.python.org/3/library/logging.html#logrecord-attributes">attributes</a>.
With this configuration, my logs will be printed to console with the short form and to file with some more details.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LOGGING</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"version"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">"disable_existing_loggers"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"formatters"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"verbose"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"format"</span><span class="p">:</span> <span class="s">"{levelname} {asctime} {module} || {message}"</span><span class="p">,</span>
            <span class="s">"style"</span><span class="p">:</span> <span class="s">"{"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s">"simple"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"format"</span><span class="p">:</span> <span class="s">"{levelname} {message}"</span><span class="p">,</span>
            <span class="s">"style"</span><span class="p">:</span> <span class="s">"{"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s">"handlers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"console"</span><span class="p">:</span> <span class="p">{</span><span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.StreamHandler"</span><span class="p">,</span><span class="s">"formatter"</span><span class="p">:</span> <span class="s">"verbose"</span><span class="p">,},</span>
        <span class="s">"file"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"formatter"</span><span class="p">:</span> <span class="s">"verbose"</span><span class="p">,</span>
            <span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.FileHandler"</span><span class="p">,</span>
            <span class="s">"filename"</span><span class="p">:</span> <span class="s">"logs/platform.log"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s">"loggers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"django"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"handlers"</span><span class="p">:</span> <span class="p">[</span><span class="s">"console"</span><span class="p">,</span> <span class="s">"file"</span><span class="p">],</span>
            <span class="s">"level"</span><span class="p">:</span> <span class="s">"INFO"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="filters">Filters</h3>

<p>Filters are attached to handlers. For example, you can filter logs with level DEBUG to be printed to console. Defining your own filter is also possible.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LOGGING</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"version"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">"disable_existing_loggers"</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">"filters"</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s">"debug_only"</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s">"()"</span> <span class="p">:</span> <span class="s">"django.utils.log.RequireDebugTrue"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s">"handlers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"console"</span><span class="p">:</span> <span class="p">{</span><span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.StreamHandler"</span><span class="p">},</span>
        <span class="s">"file"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"filters"</span><span class="p">:</span> <span class="p">[</span><span class="s">"debug_only"</span><span class="p">],</span>
            <span class="s">"class"</span><span class="p">:</span> <span class="s">"logging.FileHandler"</span><span class="p">,</span>
            <span class="s">"filename"</span><span class="p">:</span> <span class="s">"logs/platform.log"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s">"loggers"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"django"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"handlers"</span><span class="p">:</span> <span class="p">[</span><span class="s">"console"</span><span class="p">,</span> <span class="s">"file"</span><span class="p">],</span>
            <span class="s">"level"</span><span class="p">:</span> <span class="s">"INFO"</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h3 id="django-built-in-loggers-and-handlers">Django built-in loggers and handlers</h3>

<p>There are a few <a href="https://docs.djangoproject.com/en/3.2/topics/logging/#django-s-logging-extensions">Django loggers and handlers</a> that you can use. Consider them instead of building your own.</p>

<h3 id="some-handler-ideas">Some handler Ideas</h3>

<ul>
  <li>I made a separate logger for events. Every time event is posted, it helps me to track the order of events in the system. In the end, you can generate some kind of event flow specification with it.</li>
  <li>If your app is using some API you can add a logger in class where requests are handled. Simply track every request in a separate file.</li>
  <li>Prepare handler for critical errors. Maybe send them via email to Admin?</li>
  <li>On my last project, I was sending a lot of emails. You can make a separate file with the addressee and title message.</li>
</ul>
:ET